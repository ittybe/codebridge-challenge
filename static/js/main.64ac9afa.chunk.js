(this["webpackJsonpcodebridge-challenge"]=this["webpackJsonpcodebridge-challenge"]||[]).push([[0],{113:function(e,t,a){},114:function(e,t,a){},115:function(e,t,a){},135:function(e,t,a){},142:function(e,t,a){},144:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(30),s=a.n(i),c=(a(113),a(114),a(51)),o=a(52),l=a(93),h=a(92),u=(a(115),a(32)),d=a.n(u),b=a(55),p=a(56),m=a.n(p);function x(){return(x=Object(b.a)(d.a.mark((function e(){var t,a,n,r,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.itbook.store/1.0/new",e.prev=1,e.next=4,m.a.get("https://api.itbook.store/1.0/new");case 4:if(!("books"in(t=e.sent).data)){e.next=18;break}a=[],n=0;case 8:if(!(n<t.data.books.length)){e.next=17;break}return r=t.data.books[n],e.next=12,j(r.isbn13);case 12:(i=e.sent)?a.push(i):console.log("the book is not added ".concat(r.isbn13," ").concat(r));case 14:n++,e.next=8;break;case 17:return e.abrupt("return",a);case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(1),console.error(e.t0);case 23:case"end":return e.stop()}}),e,null,[[1,20]])})))).apply(this,arguments)}function j(e){return g.apply(this,arguments)}function g(){return(g=Object(b.a)(d.a.mark((function e(t){var a,n,r,i,s,c,o,l,h,u,b,p,x;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="https://api.itbook.store/1.0/books/".concat(t),e.prev=1,e.next=4,m.a.get(a);case 4:if("0"!==(n=e.sent).data.error){e.next=8;break}return r=n.data,i=r.authors,s=r.title,c=r.subtitle,o=r.isbn13,l=r.year,h=r.pages,u=r.desc,b=r.price,p=r.image,x=r.url,e.abrupt("return",{authors:i,title:s,subtitle:c,isbn13:o,year:l,pages:h,desc:u,price:b,imageUrl:p,url:x});case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}var f=a(68),v=a.n(f),O=a(196),k=a(197),y=a(200),S=a(194),w=a(198),N=a(191),B=a(88),W=a.n(B),C=a(5),D=a(89),E=a.n(D),T=(a(135),a(2)),I=Object(N.a)({yearWrapper:{display:"flex",alignItems:"center"},year:{margin:"3px",marginBottom:"0px",lineHeight:"1"},linkWrapper:{marginTop:"auto"},content:{display:"grid",gridTemplateRows:"25px 80px 90px",gap:"0px 0px"},title:{fontSize:"1.2rem",lineHeight:1.3},arrowIcon:{marginLeft:"5px",verticalAlign:"middle"}});Object(C.a)(O.a)((function(e){e.theme;return{borderRadius:16,boxShadow:"0 8px 16px 0 #BDC9D7",overflow:"hidden",maxWidth:300}}));function R(e){var t=function(e){e.autoEscape,e.caseSensitive,e.sanitize;var t=e.searchWords,a=e.textToHighlight,n=[];if(t.length>0){var r=void 0;t.forEach((function(e){if(""!==e)for(var t=function(e){return new RegExp("\\b".concat(e,"\\b"),"gi")}(e);null!=(r=t.exec(a));){var i=r.index,s=r.index+e.length;n.length>0&&i-1===n[n.length-1].end?n[n.length-1].end=s:n.push({start:i,end:s})}}))}return n},a=I();return Object(T.jsx)("div",{className:"book-summary",children:Object(T.jsxs)(O.a,{className:"book-summary-card",sx:{margin:"0px auto",maxWidth:"300px"},children:[Object(T.jsx)(y.a,{component:"img",height:"300",image:e.imageUrl,alt:e.title+" image"}),Object(T.jsxs)(k.a,{className:a.content,children:[Object(T.jsxs)(S.a,{gutterBottom:!0,className:a.yearWrapper,variant:"body2",color:"text.secondary",component:"div",children:[Object(T.jsx)(W.a,{fontSize:"smaller",className:a.calendarIcon}),Object(T.jsx)("div",{className:a.year,children:e.year})]}),Object(T.jsx)(S.a,{gutterBottom:!0,component:"div",variant:"h3",children:Object(T.jsx)(v.a,{highlightClassName:"highlight-text",findChunks:t,autoEscape:!0,searchWords:e.searchQuery.split(" "),textToHighlight:e.title})}),Object(T.jsx)(S.a,{variant:"body2",color:"text.secondary",children:Object(T.jsx)(v.a,{highlightClassName:"highlight-text",findChunks:t,autoEscape:!0,searchWords:e.searchQuery.split(" "),textToHighlight:e.desc+"..."})}),Object(T.jsx)(S.a,{children:Object(T.jsxs)(w.a,{underline:"none",href:"/codebridge-challenge/books/".concat(e.isbn13),children:["Read more",Object(T.jsx)(E.a,{fontSize:"smaller",className:a.arrowIcon})]})})]})]})})}var _=a(192),M=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={booksSummaries:[],booksToDisplay:void 0,searchQuery:""},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;(function(){return x.apply(this,arguments)})().then((function(t){e.setState({booksSummaries:t}),console.log(t)})).catch((function(e){console.log(e)}))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();for(var a=function(e,t){var a=new RegExp("\\b".concat(e,"\\b"),"gi");return((t||"").match(a)||[]).length},n=this.state.searchQuery.split(" ").filter((function(e){return""!==e})),r=[],i=function(e){var i=t.state.booksSummaries[e],s=0,c=0;n.forEach((function(e){c+=a(e,i.title)}));var o=0;n.forEach((function(e){o+=a(e,i.desc.slice(0,101))})),s+=o+2*c,r.push({isbn13:i.isbn13,index:s})},s=0;s<this.state.booksSummaries.length;s++)i(s);r.sort((function(e,t){return t.index-e.index})),r=r.filter((function(e){return e.index>0})),this.setState({booksToDisplay:r})}},{key:"handleChange",value:function(e){this.setState({searchQuery:e.target.value})}},{key:"getBookSummaries",value:function(){if(void 0===this.state.booksToDisplay)return this.state.booksSummaries;var e=[],t=this.state.booksSummaries;return this.state.booksToDisplay.forEach((function(a){var n=t.find((function(e){return e.isbn13===a.isbn13}));e.push(n)})),e}},{key:"render",value:function(){var e=this;return Object(T.jsxs)("div",{className:"app",children:[Object(T.jsx)("div",{className:"app__search",children:Object(T.jsx)("form",{action:"",onSubmit:function(t){return e.handleSubmit(t)},className:"app-form",children:Object(T.jsx)(_.a,{className:"app-form__text-field",sx:{width:"40%",boxShadow:"rgba(149, 157, 165, 0.2) 0px 8px 24px"},label:"search for keywords",color:"primary",variant:"outlined",onChange:function(t){return e.handleChange(t)}})})}),Object(T.jsxs)("div",{className:"app__results-count",children:["Results: ",this.getBookSummaries().length]}),Object(T.jsx)("div",{className:"app__books-summaries",children:this.getBookSummaries().map((function(t,a){return Object(T.jsx)(R,{searchQuery:e.state.searchQuery,title:t.title,imageUrl:t.imageUrl,year:t.year,desc:t.desc.slice(0,101),isbn13:t.isbn13},t.isbn13)}))})]})}}]),a}(r.a.Component),Q=M,z=a(13),H=a(12),U=(a(142),a(90)),L=a.n(U),A=Object(N.a)({title:{textAlign:"center",marginBottom:"50px"},arrowBackIcon:{marginRight:"5px",verticalAlign:"middle"},linkWrapper:{margin:"40px 0px 0px 40px"},moreInfoLinkWrapper:{marginTop:"30px"}});var F=function(e){var t=Object(n.useState)({authors:"",title:"",subtitle:"",isbn13:"",year:"",pages:"",desc:"",price:"",imageUrl:"",url:""}),a=Object(z.a)(t,2),r=a[0],i=a[1],s=Object(H.g)();Object(n.useEffect)((function(){j(s.isbn13).then((function(e){i(e)}))}),[]);var c=A();return Object(T.jsx)("div",{className:"book-page",children:Object(T.jsxs)("div",{className:"book-card-wrapper",children:[Object(T.jsx)(O.a,{children:Object(T.jsxs)(k.a,{children:[Object(T.jsx)(S.a,{gutterBottom:!0,component:"div",variant:"h3",className:c.title,children:r.title}),Object(T.jsx)(S.a,{variant:"body2",children:r.desc}),Object(T.jsx)(S.a,{variant:"body2",className:c.moreInfoLinkWrapper,children:Object(T.jsx)(w.a,{underline:"none",href:r.url,children:"More information"})})]})}),Object(T.jsx)(S.a,{className:c.linkWrapper,children:Object(T.jsxs)(w.a,{underline:"none",href:"/codebridge-challenge",children:[Object(T.jsx)(L.a,{fontSize:"smaller",className:c.arrowBackIcon}),"Back to homepage"]})})]})})},J=a(190),q=a(67),G=a(91),K=Object(G.a)({palette:{primary:{main:"#000000"}},typography:{fontFamily:"Montserrat"},components:{MuiLink:{styleOverrides:{root:{textDecoration:"none",color:"black",fontWeight:"700","&:hover":{color:"gray"}}}},MuiCard:{styleOverrides:{root:{borderRadius:16,boxShadow:"0 8px 16px 0 #BDC9D7",overflow:"hidden"}}},MuiTypography:{styleOverrides:{h3:{fontSize:"1.2rem",lineHeight:1.3}}}}}),P=a(195);s.a.render(Object(T.jsx)(r.a.StrictMode,{children:Object(T.jsx)(P.a,{theme:K,children:Object(T.jsx)(J.a,{injectFirst:!0,children:Object(T.jsx)(q.a,{children:Object(T.jsxs)(H.c,{children:[Object(T.jsx)(H.a,{path:"codebridge-challenge",element:Object(T.jsx)(Q,{})}),Object(T.jsx)(H.a,{path:"codebridge-challenge/books/:isbn13",element:Object(T.jsx)(F,{})})]})})})})}),document.getElementById("root"))}},[[144,1,2]]]);
//# sourceMappingURL=main.64ac9afa.chunk.js.map